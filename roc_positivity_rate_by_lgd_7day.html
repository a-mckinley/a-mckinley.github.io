<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"layer": [{"data": {"name": "data-5e641d0f5a5499e2123719d232479f98"}, "mark": "point", "encoding": {"color": {"type": "nominal", "field": "color", "scale": null}, "x": {"type": "temporal", "field": "date", "title": "Date"}, "y": {"type": "quantitative", "field": "roc_positivity_rate_7_day_rolling_avg", "title": "Rate of Change of Positivity Rate"}}}, {"data": {"name": "data-5e641d0f5a5499e2123719d232479f98"}, "mark": "line", "encoding": {"color": {"value": "lightgray"}, "x": {"type": "temporal", "field": "date", "title": "Date"}, "y": {"type": "quantitative", "field": "roc_positivity_rate_7_day_rolling_avg", "title": "Rate of Change of Positivity Rate"}}}, {"data": {"name": "data-ff09e16f9d353e34bf55386cf74406c2"}, "mark": {"type": "text", "align": "left", "dx": 0, "dy": 0, "fontSize": 10, "lineBreak": "\n"}, "encoding": {"text": {"type": "nominal", "field": "event"}, "x": {"type": "temporal", "field": "date"}, "y": {"type": "quantitative", "field": "y"}}}, {"data": {"name": "data-ff09e16f9d353e34bf55386cf74406c2"}, "mark": {"type": "rect", "color": "red", "opacity": 0.1}, "encoding": {"color": {"type": "nominal", "field": "type", "legend": {"title": "Event Type"}}, "x": {"type": "temporal", "field": "date"}, "x2": {"field": "end"}}}, {"data": {"name": "data-6f5cbcae4d1d760039d98b58f1e752eb"}, "mark": {"type": "rule", "color": "black"}, "encoding": {"y": {"type": "quantitative", "field": "y"}}}], "height": 380, "title": "Rate of Change of Positivity Rate (7 day rolling between -3 and +3 days) - Updated 2021-03-15", "width": 1200}, {"layer": [{"data": {"name": "data-5e641d0f5a5499e2123719d232479f98"}, "mark": "area", "encoding": {"color": {"value": "mistyrose"}, "x": {"type": "temporal", "field": "date", "title": "Date"}, "y": {"type": "quantitative", "field": "positivity_rate_7_day_rolling_avg", "title": "Absolute Positivity Rate"}}}, {"data": {"name": "data-ff09e16f9d353e34bf55386cf74406c2"}, "mark": {"type": "rect", "color": "red", "opacity": 0.1}, "encoding": {"color": {"type": "nominal", "field": "type", "legend": {"title": "Event Type"}}, "x": {"type": "temporal", "field": "date"}, "x2": {"field": "end"}}}], "height": 380, "title": "Absolute Positivity Rate (7 day rolling average over previous 7 days) - Updated 2021-03-15", "width": 1200}], "title": {"text": ["Alastair McKinley (@dsl4life) 2021", "Data from https://www.health-ni.gov.uk/articles/covid-19-daily-dashboard-updates"], "anchor": "end", "baseline": "bottom", "fontSize": 10, "fontWeight": "normal", "orient": "bottom"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-5e641d0f5a5499e2123719d232479f98": [{"date": "2021-03-14", "positivity_rate_7_day_rolling_avg": 4.151153772526887, "roc_positivity_rate_7_day_rolling_avg": -0.2265532633848215, "color": "steelblue"}, {"date": "2021-03-13", "positivity_rate_7_day_rolling_avg": 4.363687132665363, "roc_positivity_rate_7_day_rolling_avg": -0.21818094039923483, "color": "steelblue"}, {"date": "2021-03-12", "positivity_rate_7_day_rolling_avg": 4.69851038400086, "roc_positivity_rate_7_day_rolling_avg": -0.23901752206418556, "color": "steelblue"}, {"date": "2021-03-11", "positivity_rate_7_day_rolling_avg": 4.839678137115648, "roc_positivity_rate_7_day_rolling_avg": -0.23005891364713346, "color": "steelblue"}, {"date": "2021-03-10", "positivity_rate_7_day_rolling_avg": 5.057366826066173, "roc_positivity_rate_7_day_rolling_avg": -0.18997489641538198, "color": "steelblue"}, {"date": "2021-03-09", "positivity_rate_7_day_rolling_avg": 5.242058474523061, "roc_positivity_rate_7_day_rolling_avg": -0.16095326791458828, "color": "steelblue"}, {"date": "2021-03-08", "positivity_rate_7_day_rolling_avg": 5.585258904912, "roc_positivity_rate_7_day_rolling_avg": -0.16821686593768767, "color": "steelblue"}, {"date": "2021-03-07", "positivity_rate_7_day_rolling_avg": 5.761566168056821, "roc_positivity_rate_7_day_rolling_avg": -0.196130753514622, "color": "steelblue"}, {"date": "2021-03-06", "positivity_rate_7_day_rolling_avg": 5.693511407573037, "roc_positivity_rate_7_day_rolling_avg": -0.23728868503124914, "color": "steelblue"}, {"date": "2021-03-05", "positivity_rate_7_day_rolling_avg": 5.825183259402978, "roc_positivity_rate_7_day_rolling_avg": -0.22617912959364617, "color": "steelblue"}, {"date": "2021-03-04", "positivity_rate_7_day_rolling_avg": 6.0171961986794615, "roc_positivity_rate_7_day_rolling_avg": -0.24412968937663773, "color": "steelblue"}, {"date": "2021-03-03", "positivity_rate_7_day_rolling_avg": 6.430282100668527, "roc_positivity_rate_7_day_rolling_avg": -0.314676944970024, "color": "steelblue"}, {"date": "2021-03-02", "positivity_rate_7_day_rolling_avg": 6.903079269741805, "roc_positivity_rate_7_day_rolling_avg": -0.35413903541176495, "color": "steelblue"}, {"date": "2021-03-01", "positivity_rate_7_day_rolling_avg": 7.168512812067523, "roc_positivity_rate_7_day_rolling_avg": -0.3922712688495042, "color": "steelblue"}, {"date": "2021-02-28", "positivity_rate_7_day_rolling_avg": 7.470473993693285, "roc_positivity_rate_7_day_rolling_avg": -0.35740026351407156, "color": "steelblue"}, {"date": "2021-02-27", "positivity_rate_7_day_rolling_avg": 7.896250022363205, "roc_positivity_rate_7_day_rolling_avg": -0.33411206951009514, "color": "steelblue"}, {"date": "2021-02-26", "positivity_rate_7_day_rolling_avg": 8.304156507285333, "roc_positivity_rate_7_day_rolling_avg": -0.33868889399293894, "color": "steelblue"}, {"date": "2021-02-25", "positivity_rate_7_day_rolling_avg": 8.763095080625991, "roc_positivity_rate_7_day_rolling_avg": -0.3717763781184335, "color": "steelblue"}, {"date": "2021-02-24", "positivity_rate_7_day_rolling_avg": 8.932083945267028, "roc_positivity_rate_7_day_rolling_avg": -0.37139250503039734, "color": "steelblue"}, {"date": "2021-02-23", "positivity_rate_7_day_rolling_avg": 9.24186375631247, "roc_positivity_rate_7_day_rolling_avg": -0.33852840473120616, "color": "steelblue"}, {"date": "2021-02-22", "positivity_rate_7_day_rolling_avg": 9.539335070018096, "roc_positivity_rate_7_day_rolling_avg": -0.2797518994036136, "color": "steelblue"}, {"date": "2021-02-21", "positivity_rate_7_day_rolling_avg": 10.07290864052232, "roc_positivity_rate_7_day_rolling_avg": -0.2731721140490662, "color": "steelblue"}, {"date": "2021-02-20", "positivity_rate_7_day_rolling_avg": 10.495997557575986, "roc_positivity_rate_7_day_rolling_avg": -0.2536328990589293, "color": "steelblue"}, {"date": "2021-02-19", "positivity_rate_7_day_rolling_avg": 10.673855340403776, "roc_positivity_rate_7_day_rolling_avg": -0.2440808135085096, "color": "steelblue"}, {"date": "2021-02-18", "positivity_rate_7_day_rolling_avg": 10.721358376451287, "roc_positivity_rate_7_day_rolling_avg": -0.17152205202154466, "color": "steelblue"}, {"date": "2021-02-17", "positivity_rate_7_day_rolling_avg": 10.844288743610491, "roc_positivity_rate_7_day_rolling_avg": -0.11036106205887337, "color": "steelblue"}, {"date": "2021-02-16", "positivity_rate_7_day_rolling_avg": 11.017294049724976, "roc_positivity_rate_7_day_rolling_avg": -0.12403446852432712, "color": "steelblue"}, {"date": "2021-02-15", "positivity_rate_7_day_rolling_avg": 11.247900764577663, "roc_positivity_rate_7_day_rolling_avg": -0.1863646016861519, "color": "steelblue"}, {"date": "2021-02-14", "positivity_rate_7_day_rolling_avg": 11.273563004673132, "roc_positivity_rate_7_day_rolling_avg": -0.1956751220647277, "color": "steelblue"}, {"date": "2021-02-13", "positivity_rate_7_day_rolling_avg": 11.2685249919881, "roc_positivity_rate_7_day_rolling_avg": -0.19113292364811332, "color": "steelblue"}, {"date": "2021-02-12", "positivity_rate_7_day_rolling_avg": 11.542096620074066, "roc_positivity_rate_7_day_rolling_avg": -0.17391492075297346, "color": "steelblue"}, {"date": "2021-02-11", "positivity_rate_7_day_rolling_avg": 12.02591058825435, "roc_positivity_rate_7_day_rolling_avg": -0.201247556470379, "color": "steelblue"}, {"date": "2021-02-10", "positivity_rate_7_day_rolling_avg": 12.214014598063585, "roc_positivity_rate_7_day_rolling_avg": -0.24913292306080312, "color": "steelblue"}, {"date": "2021-02-09", "positivity_rate_7_day_rolling_avg": 12.355224515261769, "roc_positivity_rate_7_day_rolling_avg": -0.24936345763749226, "color": "steelblue"}, {"date": "2021-02-08", "positivity_rate_7_day_rolling_avg": 12.465305209848477, "roc_positivity_rate_7_day_rolling_avg": -0.19561752013888345, "color": "steelblue"}, {"date": "2021-02-07", "positivity_rate_7_day_rolling_avg": 12.682295899965785, "roc_positivity_rate_7_day_rolling_avg": -0.21867431976806578, "color": "steelblue"}, {"date": "2021-02-06", "positivity_rate_7_day_rolling_avg": 13.012455453413722, "roc_positivity_rate_7_day_rolling_avg": -0.2599204867547983, "color": "steelblue"}, {"date": "2021-02-05", "positivity_rate_7_day_rolling_avg": 13.287640823536512, "roc_positivity_rate_7_day_rolling_avg": -0.31082768641327924, "color": "steelblue"}, {"date": "2021-02-04", "positivity_rate_7_day_rolling_avg": 13.395233229226534, "roc_positivity_rate_7_day_rolling_avg": -0.33958896542398315, "color": "steelblue"}, {"date": "2021-02-03", "positivity_rate_7_day_rolling_avg": 13.744734836440045, "roc_positivity_rate_7_day_rolling_avg": -0.3701050505854772, "color": "steelblue"}, {"date": "2021-02-02", "positivity_rate_7_day_rolling_avg": 14.174667922545357, "roc_positivity_rate_7_day_rolling_avg": -0.3485664639925949, "color": "steelblue"}, {"date": "2021-02-01", "positivity_rate_7_day_rolling_avg": 14.641099014741432, "roc_positivity_rate_7_day_rolling_avg": -0.3686206573080124, "color": "steelblue"}, {"date": "2021-01-31", "positivity_rate_7_day_rolling_avg": 15.059418657933668, "roc_positivity_rate_7_day_rolling_avg": -0.4227445580183148, "color": "steelblue"}, {"date": "2021-01-30", "positivity_rate_7_day_rolling_avg": 15.603190807512062, "roc_positivity_rate_7_day_rolling_avg": -0.4190834142076473, "color": "steelblue"}, {"date": "2021-01-29", "positivity_rate_7_day_rolling_avg": 15.727606071484676, "roc_positivity_rate_7_day_rolling_avg": -0.4374876885483613, "color": "steelblue"}, {"date": "2021-01-28", "positivity_rate_7_day_rolling_avg": 15.97557783038262, "roc_positivity_rate_7_day_rolling_avg": -0.4342252234500114, "color": "steelblue"}, {"date": "2021-01-27", "positivity_rate_7_day_rolling_avg": 16.70394674256825, "roc_positivity_rate_7_day_rolling_avg": -0.3833981319111981, "color": "steelblue"}, {"date": "2021-01-26", "positivity_rate_7_day_rolling_avg": 17.108251821998888, "roc_positivity_rate_7_day_rolling_avg": -0.4385602445155549, "color": "steelblue"}, {"date": "2021-01-25", "positivity_rate_7_day_rolling_avg": 17.70351283457996, "roc_positivity_rate_7_day_rolling_avg": -0.46587947012260933, "color": "steelblue"}, {"date": "2021-01-24", "positivity_rate_7_day_rolling_avg": 18.098995222083747, "roc_positivity_rate_7_day_rolling_avg": -0.3700494248482765, "color": "steelblue"}, {"date": "2021-01-23", "positivity_rate_7_day_rolling_avg": 18.28697773089045, "roc_positivity_rate_7_day_rolling_avg": -0.3360754904679522, "color": "steelblue"}, {"date": "2021-01-22", "positivity_rate_7_day_rolling_avg": 18.79752778309356, "roc_positivity_rate_7_day_rolling_avg": -0.29117044662536834, "color": "steelblue"}, {"date": "2021-01-21", "positivity_rate_7_day_rolling_avg": 19.236734121240886, "roc_positivity_rate_7_day_rolling_avg": -0.29535641784456096, "color": "steelblue"}, {"date": "2021-01-20", "positivity_rate_7_day_rolling_avg": 19.294292716506185, "roc_positivity_rate_7_day_rolling_avg": -0.2914556163995208, "color": "steelblue"}, {"date": "2021-01-19", "positivity_rate_7_day_rolling_avg": 19.460780255274553, "roc_positivity_rate_7_day_rolling_avg": -0.2678200022319151, "color": "steelblue"}, {"date": "2021-01-18", "positivity_rate_7_day_rolling_avg": 19.74170596095754, "roc_positivity_rate_7_day_rolling_avg": -0.2797438284416067, "color": "steelblue"}, {"date": "2021-01-17", "positivity_rate_7_day_rolling_avg": 20.166490146995674, "roc_positivity_rate_7_day_rolling_avg": -0.32474425984134364, "color": "steelblue"}, {"date": "2021-01-16", "positivity_rate_7_day_rolling_avg": 20.327167045687094, "roc_positivity_rate_7_day_rolling_avg": -0.40939875178573104, "color": "steelblue"}, {"date": "2021-01-15", "positivity_rate_7_day_rolling_avg": 20.672267798716966, "roc_positivity_rate_7_day_rolling_avg": -0.4152753635555513, "color": "steelblue"}, {"date": "2021-01-14", "positivity_rate_7_day_rolling_avg": 21.194940920332133, "roc_positivity_rate_7_day_rolling_avg": -0.4613785975421436, "color": "steelblue"}, {"date": "2021-01-13", "positivity_rate_7_day_rolling_avg": 21.56750253539559, "roc_positivity_rate_7_day_rolling_avg": -0.6016551610245793, "color": "steelblue"}, {"date": "2021-01-12", "positivity_rate_7_day_rolling_avg": 22.32657151777467, "roc_positivity_rate_7_day_rolling_avg": -0.6780309137955065, "color": "steelblue"}, {"date": "2021-01-11", "positivity_rate_7_day_rolling_avg": 22.648633505846398, "roc_positivity_rate_7_day_rolling_avg": -0.7563446644628838, "color": "steelblue"}, {"date": "2021-01-10", "positivity_rate_7_day_rolling_avg": 23.39614032979068, "roc_positivity_rate_7_day_rolling_avg": -0.8457980781772874, "color": "steelblue"}, {"date": "2021-01-09", "positivity_rate_7_day_rolling_avg": 24.53875317285915, "roc_positivity_rate_7_day_rolling_avg": -0.8753154428100594, "color": "steelblue"}, {"date": "2021-01-08", "positivity_rate_7_day_rolling_avg": 25.41848419528551, "roc_positivity_rate_7_day_rolling_avg": -0.9700346264683023, "color": "steelblue"}, {"date": "2021-01-07", "positivity_rate_7_day_rolling_avg": 26.48935357157232, "roc_positivity_rate_7_day_rolling_avg": -0.9268020944622138, "color": "steelblue"}, {"date": "2021-01-06", "positivity_rate_7_day_rolling_avg": 27.488089082636602, "roc_positivity_rate_7_day_rolling_avg": -0.7212922458839773, "color": "steelblue"}, {"date": "2021-01-05", "positivity_rate_7_day_rolling_avg": 28.453779617445086, "roc_positivity_rate_7_day_rolling_avg": -0.5249229027849986, "color": "steelblue"}, {"date": "2021-01-04", "positivity_rate_7_day_rolling_avg": 29.438875891124514, "roc_positivity_rate_7_day_rolling_avg": -0.31317492098122707, "color": "steelblue"}, {"date": "2021-01-03", "positivity_rate_7_day_rolling_avg": 29.883754991026176, "roc_positivity_rate_7_day_rolling_avg": 0.039528418126960015, "color": "red"}, {"date": "2021-01-02", "positivity_rate_7_day_rolling_avg": 29.58779889404699, "roc_positivity_rate_7_day_rolling_avg": 0.5181273636859848, "color": "red"}, {"date": "2021-01-01", "positivity_rate_7_day_rolling_avg": 29.092944514780502, "roc_positivity_rate_7_day_rolling_avg": 1.0027803059907232, "color": "red"}, {"date": "2020-12-31", "positivity_rate_7_day_rolling_avg": 28.68157801844091, "roc_positivity_rate_7_day_rolling_avg": 1.4021941363419177, "color": "red"}, {"date": "2020-12-30", "positivity_rate_7_day_rolling_avg": 27.211390155747882, "roc_positivity_rate_7_day_rolling_avg": 1.6580275462210048, "color": "red"}, {"date": "2020-12-29", "positivity_rate_7_day_rolling_avg": 24.826888071643193, "roc_positivity_rate_7_day_rolling_avg": 1.8220513673286132, "color": "red"}, {"date": "2020-12-28", "positivity_rate_7_day_rolling_avg": 22.419413749189452, "roc_positivity_rate_7_day_rolling_avg": 2.034020852890093, "color": "red"}, {"date": "2020-12-27", "positivity_rate_7_day_rolling_avg": 20.068396036632752, "roc_positivity_rate_7_day_rolling_avg": 1.880938812303708, "color": "red"}, {"date": "2020-12-26", "positivity_rate_7_day_rolling_avg": 17.981606070499957, "roc_positivity_rate_7_day_rolling_avg": 1.524044278909129, "color": "red"}, {"date": "2020-12-25", "positivity_rate_7_day_rolling_avg": 16.33858494348021, "roc_positivity_rate_7_day_rolling_avg": 1.1937661850770165, "color": "red"}, {"date": "2020-12-24", "positivity_rate_7_day_rolling_avg": 14.443432048210257, "roc_positivity_rate_7_day_rolling_avg": 0.8524922962875079, "color": "red"}, {"date": "2020-12-23", "positivity_rate_7_day_rolling_avg": 14.044818469621925, "roc_positivity_rate_7_day_rolling_avg": 0.4789042011301147, "color": "red"}, {"date": "2020-12-22", "positivity_rate_7_day_rolling_avg": 14.158578119279289, "roc_positivity_rate_7_day_rolling_avg": 0.2497682244485129, "color": "red"}, {"date": "2020-12-21", "positivity_rate_7_day_rolling_avg": 14.063050453650337, "roc_positivity_rate_7_day_rolling_avg": -0.04876941668882776, "color": "steelblue"}, {"date": "2020-12-20", "positivity_rate_7_day_rolling_avg": 14.100949962620197, "roc_positivity_rate_7_day_rolling_avg": -0.06741556291569724, "color": "steelblue"}, {"date": "2020-12-19", "positivity_rate_7_day_rolling_avg": 14.629276662589154, "roc_positivity_rate_7_day_rolling_avg": 0.016987914839194675, "color": "red"}, {"date": "2020-12-18", "positivity_rate_7_day_rolling_avg": 14.59020737234062, "roc_positivity_rate_7_day_rolling_avg": 0.003065850219853315, "color": "red"}, {"date": "2020-12-17", "positivity_rate_7_day_rolling_avg": 14.784817965032051, "roc_positivity_rate_7_day_rolling_avg": 0.04516328991315456, "color": "red"}, {"date": "2020-12-16", "positivity_rate_7_day_rolling_avg": 14.516727410031805, "roc_positivity_rate_7_day_rolling_avg": 0.15439206561860022, "color": "red"}, {"date": "2020-12-15", "positivity_rate_7_day_rolling_avg": 14.039662715404926, "roc_positivity_rate_7_day_rolling_avg": 0.12767126900248169, "color": "red"}, {"date": "2020-12-14", "positivity_rate_7_day_rolling_avg": 14.041589502111364, "roc_positivity_rate_7_day_rolling_avg": 0.22117355554599807, "color": "red"}, {"date": "2020-12-13", "positivity_rate_7_day_rolling_avg": 13.784806933228115, "roc_positivity_rate_7_day_rolling_avg": 0.15510540330047107, "color": "red"}, {"date": "2020-12-12", "positivity_rate_7_day_rolling_avg": 13.548532203258953, "roc_positivity_rate_7_day_rolling_avg": 0.07338785583849702, "color": "red"}, {"date": "2020-12-11", "positivity_rate_7_day_rolling_avg": 13.696508489323248, "roc_positivity_rate_7_day_rolling_avg": 0.09778533724986437, "color": "red"}, {"date": "2020-12-10", "positivity_rate_7_day_rolling_avg": 13.236603076210065, "roc_positivity_rate_7_day_rolling_avg": 0.03228831411294283, "color": "red"}, {"date": "2020-12-09", "positivity_rate_7_day_rolling_avg": 13.430989586928508, "roc_positivity_rate_7_day_rolling_avg": 0.03452886203019036, "color": "red"}, {"date": "2020-12-08", "positivity_rate_7_day_rolling_avg": 13.525947724535447, "roc_positivity_rate_7_day_rolling_avg": 0.02761983673382546, "color": "red"}, {"date": "2020-12-07", "positivity_rate_7_day_rolling_avg": 13.357092141362314, "roc_positivity_rate_7_day_rolling_avg": -0.015873218163535135, "color": "steelblue"}, {"date": "2020-12-06", "positivity_rate_7_day_rolling_avg": 13.558788734437515, "roc_positivity_rate_7_day_rolling_avg": 0.0755136302775737, "color": "red"}, {"date": "2020-12-05", "positivity_rate_7_day_rolling_avg": 13.30683016904762, "roc_positivity_rate_7_day_rolling_avg": 0.07156743730725676, "color": "red"}, {"date": "2020-12-04", "positivity_rate_7_day_rolling_avg": 13.50316963218647, "roc_positivity_rate_7_day_rolling_avg": 0.04468221957861778, "color": "red"}, {"date": "2020-12-03", "positivity_rate_7_day_rolling_avg": 13.34771560335481, "roc_positivity_rate_7_day_rolling_avg": 0.10293839486589056, "color": "red"}, {"date": "2020-12-02", "positivity_rate_7_day_rolling_avg": 12.902394174985492, "roc_positivity_rate_7_day_rolling_avg": 0.046217466287908744, "color": "red"}, {"date": "2020-12-01", "positivity_rate_7_day_rolling_avg": 13.02497566338465, "roc_positivity_rate_7_day_rolling_avg": 0.11554913547476987, "color": "red"}, {"date": "2020-11-30", "positivity_rate_7_day_rolling_avg": 13.04431660431199, "roc_positivity_rate_7_day_rolling_avg": 0.0618792886995959, "color": "red"}, {"date": "2020-11-29", "positivity_rate_7_day_rolling_avg": 12.838219970376281, "roc_positivity_rate_7_day_rolling_avg": -0.009929566165751373, "color": "steelblue"}, {"date": "2020-11-28", "positivity_rate_7_day_rolling_avg": 12.983307905032259, "roc_positivity_rate_7_day_rolling_avg": 0.02179068077705613, "color": "red"}, {"date": "2020-11-27", "positivity_rate_7_day_rolling_avg": 12.694325683863081, "roc_positivity_rate_7_day_rolling_avg": -0.05901865548433476, "color": "steelblue"}, {"date": "2020-11-26", "positivity_rate_7_day_rolling_avg": 12.91456058245764, "roc_positivity_rate_7_day_rolling_avg": -0.18045986514070833, "color": "steelblue"}, {"date": "2020-11-25", "positivity_rate_7_day_rolling_avg": 12.971901138145752, "roc_positivity_rate_7_day_rolling_avg": -0.20772290904515447, "color": "steelblue"}, {"date": "2020-11-24", "positivity_rate_7_day_rolling_avg": 12.872440897945257, "roc_positivity_rate_7_day_rolling_avg": -0.29434209666595174, "color": "steelblue"}, {"date": "2020-11-23", "positivity_rate_7_day_rolling_avg": 13.457447192702332, "roc_positivity_rate_7_day_rolling_avg": -0.3165748387643385, "color": "steelblue"}, {"date": "2020-11-22", "positivity_rate_7_day_rolling_avg": 14.10143902636124, "roc_positivity_rate_7_day_rolling_avg": -0.4209602510342792, "color": "steelblue"}, {"date": "2020-11-21", "positivity_rate_7_day_rolling_avg": 14.43736826834834, "roc_positivity_rate_7_day_rolling_avg": -0.5526547484453097, "color": "steelblue"}, {"date": "2020-11-20", "positivity_rate_7_day_rolling_avg": 14.754720360524743, "roc_positivity_rate_7_day_rolling_avg": -0.5329171270689318, "color": "steelblue"}, {"date": "2020-11-19", "positivity_rate_7_day_rolling_avg": 15.130584453808009, "roc_positivity_rate_7_day_rolling_avg": -0.4645066054705581, "color": "steelblue"}, {"date": "2020-11-18", "positivity_rate_7_day_rolling_avg": 15.918622895385706, "roc_positivity_rate_7_day_rolling_avg": -0.49708781856231454, "color": "steelblue"}, {"date": "2020-11-17", "positivity_rate_7_day_rolling_avg": 16.741024137062425, "roc_positivity_rate_7_day_rolling_avg": -0.5048200373875241, "color": "steelblue"}, {"date": "2020-11-16", "positivity_rate_7_day_rolling_avg": 17.187867082184855, "roc_positivity_rate_7_day_rolling_avg": -0.4673496286792097, "color": "steelblue"}, {"date": "2020-11-15", "positivity_rate_7_day_rolling_avg": 17.352985264655146, "roc_positivity_rate_7_day_rolling_avg": -0.35912746353283914, "color": "steelblue"}, {"date": "2020-11-14", "positivity_rate_7_day_rolling_avg": 17.916982998284542, "roc_positivity_rate_7_day_rolling_avg": -0.23635749235345674, "color": "steelblue"}, {"date": "2020-11-13", "positivity_rate_7_day_rolling_avg": 18.288460622237412, "roc_positivity_rate_7_day_rolling_avg": -0.1747427016251127, "color": "steelblue"}, {"date": "2020-11-12", "positivity_rate_7_day_rolling_avg": 18.402031854562477, "roc_positivity_rate_7_day_rolling_avg": -0.2015148812754138, "color": "steelblue"}, {"date": "2020-11-11", "positivity_rate_7_day_rolling_avg": 18.43251514011558, "roc_positivity_rate_7_day_rolling_avg": -0.18598562714254793, "color": "steelblue"}, {"date": "2020-11-10", "positivity_rate_7_day_rolling_avg": 18.395526583536622, "roc_positivity_rate_7_day_rolling_avg": -0.19965967167389412, "color": "steelblue"}, {"date": "2020-11-09", "positivity_rate_7_day_rolling_avg": 18.411065993560644, "roc_positivity_rate_7_day_rolling_avg": -0.30915181583981927, "color": "steelblue"}, {"date": "2020-11-08", "positivity_rate_7_day_rolling_avg": 18.763589433583043, "roc_positivity_rate_7_day_rolling_avg": -0.3668635664570929, "color": "steelblue"}, {"date": "2020-11-07", "positivity_rate_7_day_rolling_avg": 19.218882388282378, "roc_positivity_rate_7_day_rolling_avg": -0.4506932254095578, "color": "steelblue"}, {"date": "2020-11-06", "positivity_rate_7_day_rolling_avg": 19.68607832395467, "roc_positivity_rate_7_day_rolling_avg": -0.49297292369723217, "color": "steelblue"}, {"date": "2020-11-05", "positivity_rate_7_day_rolling_avg": 20.56609456544121, "roc_positivity_rate_7_day_rolling_avg": -0.4639702788151346, "color": "steelblue"}, {"date": "2020-11-04", "positivity_rate_7_day_rolling_avg": 21.00056010531523, "roc_positivity_rate_7_day_rolling_avg": -0.4383260915018146, "color": "steelblue"}, {"date": "2020-11-03", "positivity_rate_7_day_rolling_avg": 21.550379161403526, "roc_positivity_rate_7_day_rolling_avg": -0.39994530012307294, "color": "steelblue"}, {"date": "2020-11-02", "positivity_rate_7_day_rolling_avg": 21.86187645944127, "roc_positivity_rate_7_day_rolling_avg": -0.2697401731620239, "color": "steelblue"}, {"date": "2020-11-01", "positivity_rate_7_day_rolling_avg": 22.011381385288985, "roc_positivity_rate_7_day_rolling_avg": -0.26671782828132046, "color": "steelblue"}, {"date": "2020-10-31", "positivity_rate_7_day_rolling_avg": 22.28716502879508, "roc_positivity_rate_7_day_rolling_avg": -0.22246485428404789, "color": "steelblue"}, {"date": "2020-10-30", "positivity_rate_7_day_rolling_avg": 22.485695424816182, "roc_positivity_rate_7_day_rolling_avg": -0.19024238672848778, "color": "steelblue"}, {"date": "2020-10-29", "positivity_rate_7_day_rolling_avg": 22.45427577757538, "roc_positivity_rate_7_day_rolling_avg": -0.15666884777419351, "color": "steelblue"}, {"date": "2020-10-28", "positivity_rate_7_day_rolling_avg": 22.867584903284474, "roc_positivity_rate_7_day_rolling_avg": -0.055873671528164186, "color": "steelblue"}, {"date": "2020-10-27", "positivity_rate_7_day_rolling_avg": 23.10763314139186, "roc_positivity_rate_7_day_rolling_avg": 0.019741149426490523, "color": "red"}, {"date": "2020-10-26", "positivity_rate_7_day_rolling_avg": 23.193573166540684, "roc_positivity_rate_7_day_rolling_avg": 0.06535345427655008, "color": "red"}, {"date": "2020-10-25", "positivity_rate_7_day_rolling_avg": 23.10806331970834, "roc_positivity_rate_7_day_rolling_avg": 0.14848424360755225, "color": "red"}, {"date": "2020-10-24", "positivity_rate_7_day_rolling_avg": 22.67828072949223, "roc_positivity_rate_7_day_rolling_avg": 0.2662203996499447, "color": "red"}, {"date": "2020-10-23", "positivity_rate_7_day_rolling_avg": 22.34750737883075, "roc_positivity_rate_7_day_rolling_avg": 0.33111573331023436, "color": "red"}, {"date": "2020-10-22", "positivity_rate_7_day_rolling_avg": 21.99680159763953, "roc_positivity_rate_7_day_rolling_avg": 0.35228043270078047, "color": "red"}, {"date": "2020-10-21", "positivity_rate_7_day_rolling_avg": 21.828195198031608, "roc_positivity_rate_7_day_rolling_avg": 0.28746487721567604, "color": "red"}, {"date": "2020-10-20", "positivity_rate_7_day_rolling_avg": 21.24409034384225, "roc_positivity_rate_7_day_rolling_avg": 0.26580107077345766, "color": "red"}, {"date": "2020-10-19", "positivity_rate_7_day_rolling_avg": 20.875763033369044, "roc_positivity_rate_7_day_rolling_avg": 0.2564200934410619, "color": "red"}, {"date": "2020-10-18", "positivity_rate_7_day_rolling_avg": 20.642100290802876, "roc_positivity_rate_7_day_rolling_avg": 0.33557727832552736, "color": "red"}, {"date": "2020-10-17", "positivity_rate_7_day_rolling_avg": 20.666026588982497, "roc_positivity_rate_7_day_rolling_avg": 0.27811038541547567, "color": "red"}, {"date": "2020-10-16", "positivity_rate_7_day_rolling_avg": 20.486899883416545, "roc_positivity_rate_7_day_rolling_avg": 0.3152438230651227, "color": "red"}, {"date": "2020-10-15", "positivity_rate_7_day_rolling_avg": 20.201860943552095, "roc_positivity_rate_7_day_rolling_avg": 0.3686123903001065, "color": "red"}, {"date": "2020-10-14", "positivity_rate_7_day_rolling_avg": 19.479154249752916, "roc_positivity_rate_7_day_rolling_avg": 0.45627325144979125, "color": "red"}, {"date": "2020-10-13", "positivity_rate_7_day_rolling_avg": 19.29731764593392, "roc_positivity_rate_7_day_rolling_avg": 0.5074227037773927, "color": "red"}, {"date": "2020-10-12", "positivity_rate_7_day_rolling_avg": 18.669056271913185, "roc_positivity_rate_7_day_rolling_avg": 0.5077263037613423, "color": "red"}, {"date": "2020-10-11", "positivity_rate_7_day_rolling_avg": 18.06181355870213, "roc_positivity_rate_7_day_rolling_avg": 0.47737667175185855, "color": "red"}, {"date": "2020-10-10", "positivity_rate_7_day_rolling_avg": 17.472113828833958, "roc_positivity_rate_7_day_rolling_avg": 0.5030987244929376, "color": "red"}, {"date": "2020-10-09", "positivity_rate_7_day_rolling_avg": 16.934940956974796, "roc_positivity_rate_7_day_rolling_avg": 0.4998481943269462, "color": "red"}, {"date": "2020-10-08", "positivity_rate_7_day_rolling_avg": 16.6477768172227, "roc_positivity_rate_7_day_rolling_avg": 0.5405834832148789, "color": "red"}, {"date": "2020-10-07", "positivity_rate_7_day_rolling_avg": 16.137517547489907, "roc_positivity_rate_7_day_rolling_avg": 0.6175128799079912, "color": "red"}, {"date": "2020-10-06", "positivity_rate_7_day_rolling_avg": 15.775626574483356, "roc_positivity_rate_7_day_rolling_avg": 0.6749731241829225, "color": "red"}, {"date": "2020-10-05", "positivity_rate_7_day_rolling_avg": 15.170118911624561, "roc_positivity_rate_7_day_rolling_avg": 0.7968080660820781, "color": "red"}, {"date": "2020-10-04", "positivity_rate_7_day_rolling_avg": 14.277729176197978, "roc_positivity_rate_7_day_rolling_avg": 0.830385728502015, "color": "red"}, {"date": "2020-10-03", "positivity_rate_7_day_rolling_avg": 13.14952366947802, "roc_positivity_rate_7_day_rolling_avg": 0.9601930507007302, "color": "red"}, {"date": "2020-10-02", "positivity_rate_7_day_rolling_avg": 12.210129087694337, "roc_positivity_rate_7_day_rolling_avg": 0.9826261665279069, "color": "red"}, {"date": "2020-10-01", "positivity_rate_7_day_rolling_avg": 11.070120354648152, "roc_positivity_rate_7_day_rolling_avg": 0.9342444695561657, "color": "red"}, {"date": "2020-09-30", "positivity_rate_7_day_rolling_avg": 10.324817447975802, "roc_positivity_rate_7_day_rolling_avg": 0.874093710470129, "color": "red"}, {"date": "2020-09-29", "positivity_rate_7_day_rolling_avg": 9.054275219578244, "roc_positivity_rate_7_day_rolling_avg": 0.8127907972307333, "color": "red"}, {"date": "2020-09-28", "positivity_rate_7_day_rolling_avg": 8.291735745929213, "roc_positivity_rate_7_day_rolling_avg": 0.6930588265784167, "color": "red"}, {"date": "2020-09-27", "positivity_rate_7_day_rolling_avg": 7.738017889304818, "roc_positivity_rate_7_day_rolling_avg": 0.6711794705988373, "color": "red"}, {"date": "2020-09-26", "positivity_rate_7_day_rolling_avg": 7.0308676961871175, "roc_positivity_rate_7_day_rolling_avg": 0.5512298867640003, "color": "red"}, {"date": "2020-09-25", "positivity_rate_7_day_rolling_avg": 6.520593507079204, "roc_positivity_rate_7_day_rolling_avg": 0.48059465835051857, "color": "red"}, {"date": "2020-09-24", "positivity_rate_7_day_rolling_avg": 6.218708568599236, "roc_positivity_rate_7_day_rolling_avg": 0.41636887198658074, "color": "red"}, {"date": "2020-09-23", "positivity_rate_7_day_rolling_avg": 5.626561153783941, "roc_positivity_rate_7_day_rolling_avg": 0.35805723525358396, "color": "red"}, {"date": "2020-09-22", "positivity_rate_7_day_rolling_avg": 5.195666012230242, "roc_positivity_rate_7_day_rolling_avg": 0.3290651184758197, "color": "red"}, {"date": "2020-09-21", "positivity_rate_7_day_rolling_avg": 4.927573137475583, "roc_positivity_rate_7_day_rolling_avg": 0.35515565327306325, "color": "red"}, {"date": "2020-09-20", "positivity_rate_7_day_rolling_avg": 4.823435785398753, "roc_positivity_rate_7_day_rolling_avg": 0.32547125262247667, "color": "red"}, {"date": "2020-09-19", "positivity_rate_7_day_rolling_avg": 4.52446704941203, "roc_positivity_rate_7_day_rolling_avg": 0.29359459655614195, "color": "red"}, {"date": "2020-09-18", "positivity_rate_7_day_rolling_avg": 4.217137677748466, "roc_positivity_rate_7_day_rolling_avg": 0.28682209611115683, "color": "red"}, {"date": "2020-09-17", "positivity_rate_7_day_rolling_avg": 3.7326189956877927, "roc_positivity_rate_7_day_rolling_avg": 0.30308802020771713, "color": "red"}, {"date": "2020-09-16", "positivity_rate_7_day_rolling_avg": 3.348262385426604, "roc_positivity_rate_7_day_rolling_avg": 0.2508410506282334, "color": "red"}, {"date": "2020-09-15", "positivity_rate_7_day_rolling_avg": 3.140503836337248, "roc_positivity_rate_7_day_rolling_avg": 0.22296369424965157, "color": "red"}, {"date": "2020-09-14", "positivity_rate_7_day_rolling_avg": 2.9198184646974847, "roc_positivity_rate_7_day_rolling_avg": 0.12648932001644791, "color": "red"}, {"date": "2020-09-13", "positivity_rate_7_day_rolling_avg": 2.701819643944733, "roc_positivity_rate_7_day_rolling_avg": 0.05092114337146279, "color": "red"}, {"date": "2020-09-12", "positivity_rate_7_day_rolling_avg": 2.7685796950143957, "roc_positivity_rate_7_day_rolling_avg": 0.018873898411824186, "color": "red"}, {"date": "2020-09-11", "positivity_rate_7_day_rolling_avg": 2.6563918180009054, "roc_positivity_rate_7_day_rolling_avg": -0.01234865806379602, "color": "steelblue"}, {"date": "2020-09-10", "positivity_rate_7_day_rolling_avg": 2.847193755572657, "roc_positivity_rate_7_day_rolling_avg": -0.045110260006480295, "color": "steelblue"}, {"date": "2020-09-09", "positivity_rate_7_day_rolling_avg": 2.9918143818263645, "roc_positivity_rate_7_day_rolling_avg": 0.015868057195750192, "color": "red"}, {"date": "2020-09-08", "positivity_rate_7_day_rolling_avg": 3.008386547454479, "roc_positivity_rate_7_day_rolling_avg": 0.028899301157998675, "color": "red"}, {"date": "2020-09-07", "positivity_rate_7_day_rolling_avg": 3.006259071144057, "roc_positivity_rate_7_day_rolling_avg": 0.06780750911320295, "color": "red"}, {"date": "2020-09-06", "positivity_rate_7_day_rolling_avg": 3.017591463990095, "roc_positivity_rate_7_day_rolling_avg": 0.09349770952267906, "color": "red"}, {"date": "2020-09-05", "positivity_rate_7_day_rolling_avg": 2.6575032946441444, "roc_positivity_rate_7_day_rolling_avg": 0.09484611429549616, "color": "red"}, {"date": "2020-09-04", "positivity_rate_7_day_rolling_avg": 2.4540967098949147, "roc_positivity_rate_7_day_rolling_avg": 0.08313830154056559, "color": "red"}, {"date": "2020-09-03", "positivity_rate_7_day_rolling_avg": 2.3725411917802366, "roc_positivity_rate_7_day_rolling_avg": 0.0935930002338664, "color": "red"}, {"date": "2020-09-02", "positivity_rate_7_day_rolling_avg": 2.337330415167611, "roc_positivity_rate_7_day_rolling_avg": 0.014555329973453102, "color": "red"}, {"date": "2020-09-01", "positivity_rate_7_day_rolling_avg": 2.3444637473860057, "roc_positivity_rate_7_day_rolling_avg": -0.018030652215786765, "color": "steelblue"}, {"date": "2020-08-31", "positivity_rate_7_day_rolling_avg": 2.4242909603600977, "roc_positivity_rate_7_day_rolling_avg": -0.024427355159991775, "color": "steelblue"}, {"date": "2020-08-30", "positivity_rate_7_day_rolling_avg": 2.3624404623530304, "roc_positivity_rate_7_day_rolling_avg": -0.025808819378146147, "color": "steelblue"}, {"date": "2020-08-29", "positivity_rate_7_day_rolling_avg": 2.5556159848299727, "roc_positivity_rate_7_day_rolling_avg": -0.005950923716449198, "color": "steelblue"}, {"date": "2020-08-28", "positivity_rate_7_day_rolling_avg": 2.580311275405422, "roc_positivity_rate_7_day_rolling_avg": 0.010966980181826116, "color": "red"}, {"date": "2020-08-27", "positivity_rate_7_day_rolling_avg": 2.543532677900179, "roc_positivity_rate_7_day_rolling_avg": -0.012948425458340613, "color": "steelblue"}, {"date": "2020-08-26", "positivity_rate_7_day_rolling_avg": 2.517992150814634, "roc_positivity_rate_7_day_rolling_avg": 0.03908746664850853, "color": "red"}, {"date": "2020-08-25", "positivity_rate_7_day_rolling_avg": 2.38612021340115, "roc_positivity_rate_7_day_rolling_avg": 0.056448393954389164, "color": "red"}, {"date": "2020-08-24", "positivity_rate_7_day_rolling_avg": 2.347522099087315, "roc_positivity_rate_7_day_rolling_avg": 0.04948722551527883, "color": "red"}, {"date": "2020-08-23", "positivity_rate_7_day_rolling_avg": 2.4530794405614147, "roc_positivity_rate_7_day_rolling_avg": 0.04226669364462917, "color": "red"}, {"date": "2020-08-22", "positivity_rate_7_day_rolling_avg": 2.282003718290413, "roc_positivity_rate_7_day_rolling_avg": 0.019663168298466007, "color": "red"}, {"date": "2020-08-21", "positivity_rate_7_day_rolling_avg": 2.185172517724698, "roc_positivity_rate_7_day_rolling_avg": 0.01811708774643206, "color": "red"}, {"date": "2020-08-20", "positivity_rate_7_day_rolling_avg": 2.197122099293227, "roc_positivity_rate_7_day_rolling_avg": 0.03307421919002408, "color": "red"}, {"date": "2020-08-19", "positivity_rate_7_day_rolling_avg": 2.22212529530223, "roc_positivity_rate_7_day_rolling_avg": -0.014697397218778083, "color": "steelblue"}, {"date": "2020-08-18", "positivity_rate_7_day_rolling_avg": 2.248478035311888, "roc_positivity_rate_7_day_rolling_avg": -0.04412487404010853, "color": "steelblue"}, {"date": "2020-08-17", "positivity_rate_7_day_rolling_avg": 2.2207024848622905, "roc_positivity_rate_7_day_rolling_avg": 0.0004801144206554626, "color": "red"}, {"date": "2020-08-16", "positivity_rate_7_day_rolling_avg": 2.221559906231246, "roc_positivity_rate_7_day_rolling_avg": 0.03992286239499067, "color": "red"}, {"date": "2020-08-15", "positivity_rate_7_day_rolling_avg": 2.3848854988218595, "roc_positivity_rate_7_day_rolling_avg": 0.042147080172919064, "color": "red"}, {"date": "2020-08-14", "positivity_rate_7_day_rolling_avg": 2.4940466360054576, "roc_positivity_rate_7_day_rolling_avg": 0.04665860385705762, "color": "red"}, {"date": "2020-08-13", "positivity_rate_7_day_rolling_avg": 2.193761298348639, "roc_positivity_rate_7_day_rolling_avg": 0.06570238076979984, "color": "red"}, {"date": "2020-08-12", "positivity_rate_7_day_rolling_avg": 1.9426652585372952, "roc_positivity_rate_7_day_rolling_avg": 0.1183679601851632, "color": "red"}, {"date": "2020-08-11", "positivity_rate_7_day_rolling_avg": 1.9534484741014546, "roc_positivity_rate_7_day_rolling_avg": 0.15389956822580916, "color": "red"}, {"date": "2020-08-10", "positivity_rate_7_day_rolling_avg": 1.8940922578628872, "roc_positivity_rate_7_day_rolling_avg": 0.10054553076626593, "color": "red"}, {"date": "2020-08-09", "positivity_rate_7_day_rolling_avg": 1.7616432408426472, "roc_positivity_rate_7_day_rolling_avg": 0.06076351011506625, "color": "red"}, {"date": "2020-08-08", "positivity_rate_7_day_rolling_avg": 1.556309777525717, "roc_positivity_rate_7_day_rolling_avg": 0.0763863796665117, "color": "red"}, {"date": "2020-08-07", "positivity_rate_7_day_rolling_avg": 1.4167496584247934, "roc_positivity_rate_7_day_rolling_avg": 0.06697605618511458, "color": "red"}, {"date": "2020-08-06", "positivity_rate_7_day_rolling_avg": 1.4899425829847774, "roc_positivity_rate_7_day_rolling_avg": 0.04996832248146183, "color": "red"}, {"date": "2020-08-05", "positivity_rate_7_day_rolling_avg": 1.5173206877318315, "roc_positivity_rate_7_day_rolling_avg": 0.046962852725279225, "color": "red"}, {"date": "2020-08-04", "positivity_rate_7_day_rolling_avg": 1.4187438164358728, "roc_positivity_rate_7_day_rolling_avg": 0.03152997499600515, "color": "red"}, {"date": "2020-08-03", "positivity_rate_7_day_rolling_avg": 1.425259864567085, "roc_positivity_rate_7_day_rolling_avg": 0.052474554907202986, "color": "red"}, {"date": "2020-08-02", "positivity_rate_7_day_rolling_avg": 1.4118649834724144, "roc_positivity_rate_7_day_rolling_avg": 0.07243771982076724, "color": "red"}], "data-ff09e16f9d353e34bf55386cf74406c2": [{"date": "2020-09-01", "end": "2020-09-11", "event": "schools\nreturn", "y": "-0.5", "type": "relaxation"}, {"date": "2020-09-07", "end": "2020-09-17", "event": "qub\nww", "y": "-0.5", "type": "relaxation"}, {"date": "2020-09-23", "end": "2020-10-03", "event": "wet\npubs\nopen", "y": "-0.5", "type": "relaxation"}, {"date": "2020-10-16", "end": "2020-10-26", "event": "pubs\nclose", "y": "1.4", "type": "restriction"}, {"date": "2020-11-20", "end": "2020-11-30", "event": "restrictions\nease", "y": "-0.5", "type": "relaxation"}, {"date": "2020-11-27", "end": "2020-12-11", "event": "circuit\nbreaker", "y": "1.4", "type": "restriction"}, {"date": "2020-12-11", "end": "2020-12-21", "event": "xmas\nopen", "y": "-0.5", "type": "relaxation"}, {"date": "2020-12-26", "end": "2021-01-05", "event": "christmas\nlockdown", "y": "1.4", "type": "restriction"}, {"date": "2020-12-31", "end": "2021-01-10", "event": "nye", "y": "-0.5", "type": "relaxation"}], "data-6f5cbcae4d1d760039d98b58f1e752eb": [{"y": 0.0}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>